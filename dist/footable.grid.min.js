!function(f,t,s){if(t.footable===s||null===t.foobox)throw new Error("Please check and make sure footable.js is included in the page and is loaded prior to this script.");function l(t,e){for(var a,o,i=t.find("thead"),n=(0===i.size()&&(i=f("<thead>").appendTo(t)),f("<tr>").appendTo(i)),d=0,r=e.cols.length;d<r;d++)n.append((a=e.cols[d],o=void 0,o=f("<th>"+a.title+"</th>"),f.isPlainObject(a.data)&&o.data(a.data),f.isPlainObject(a.style)&&o.css(a.style),a.className&&o.addClass(a.className),o))}function p(t,i,e,n){t.find("tr:not(."+e+")").each(function(){var t=f(this),e=i.data("index"),a=parseInt(t.data("index"),0),o=a+n;e<=a&&this!==i.get(0)&&t.attr("data-index",o).data("index",o)})}t.footable.plugins.register(function(){var c=this;c.name="Footable Grid",c.init=function(e){var i,t,a,o,n,d=e.options.classes.toggle,r=e.options.classes.detail,s=e.options.grid;s.cols&&(c.footable=e,(i=f(e.table)).data("grid",c),f.isPlainObject(s.data)&&i.data(s.data),c._items=[],function(t){for(var e=t[0],a=0,o=t.length;a<o;a++){var i=t[a];if(i.data&&(!0===i.data.toggle||"true"===i.data.toggle))return}e.data=f.extend(e.data,{toggle:!0})}(s.cols),s.showCheckbox&&(s.multiSelect=!0,s.cols.unshift({title:s.checkboxFormatter(!0),name:"",data:{"sort-ignore":!0},formatter:s.checkboxFormatter})),s.showIndex&&s.cols.unshift({title:"#",name:"index",data:{"sort-ignore":!0},formatter:s.indexFormatter}),l(i,s),0===(t=i).find("tbody").size()&&f("<tbody>").appendTo(t),t=i,a=s.cols,(o=s.pagination)&&(t.attr("data-page-size",o["page-size"]),(n=0===(n=t.find("tfoot")).size()?f('<tfoot class="hide-if-no-paging"></tfoot>').appendTo(t):n).append("<tr><td colspan="+a.length+"></td></tr>"),f("<div>").appendTo(n.find("tr:last-child td")).addClass(o["pagination-class"])),i.off(".grid").on({"footable_initialized.grid":function(t){s.url||s.ajax?f.ajax(s.ajax||{url:s.url}).then(function(t){c.newItem(t),e.raise(s.events.loaded)},function(t){throw"load data from "+(s.url||s.ajax.url)+" fail"}):(c.newItem(s.items||[]),e.raise(s.events.loaded))},"footable_sorted.grid footable_grid_created.grid footable_grid_removed.grid":function(t){s.showIndex&&0<c.getItem().length&&i.find("tbody tr:not(."+r+")").each(function(t){var e=f(this).find("td:first");e.html(s.indexFormatter(null,e,t))})},"footable_redrawn.grid footable_row_removed.grid":function(t){var e,a,o;0===c.getItem().length&&s.showEmptyInfo&&(e=i,a=s.cols,o=s.emptyInfo,0===e.find("tr.emptyInfo").size())&&e.find("tbody").append('<tr class="emptyInfo"><td colspan="'+a.length+'">'+o+"</td></tr>")}}).on({"click.grid":function(a){var t;return 0<f(a.target).closest("td").find(">."+d).size()||!!(t=f(a.currentTarget)).hasClass(r)||(s.multiSelect||t.hasClass(s.activeClass)||i.find("tbody tr."+s.activeClass).removeClass(s.activeClass),t.toggleClass(s.activeClass),s.showCheckbox&&t.find("input:checkbox.check").prop("checked",function(t,e){return a.target===this?e:!e}),void e.toggleDetail(t))}},"tbody tr").on("click.grid","thead input:checkbox.checkAll",function(t){t=!!t.currentTarget.checked;t?i.find("tbody tr").addClass(s.activeClass):i.find("tbody tr").removeClass(s.activeClass),i.find("tbody input:checkbox.check").prop("checked",t)}))},c.getSelected=function(){var t=c.footable.options.grid;return f(c.footable.table).find("tbody>tr."+t.activeClass).map(function(){return f(this).data("index")})},c.getItem=function(t){return t!==s?f.isArray(t)?f.map(t,function(t){return c._items[t]}):c._items[t]:c._items},c._makeRow=function(t,e){var a,o,i,n=c.footable.options.grid;if(f.isFunction(n.template))d=f(n.template(f.extend({},{__index:e},t)));else for(var d=f("<tr>"),r=0,s=n.cols.length;r<s;r++){var l=n.cols[r];d.append((a=t[(l=l).name]||"",o=e,i=void 0,i=f("<td>"),l.formatter?i.html(l.formatter(a,i,o)):i.html(a||""),i))}return d.attr("data-index",e),d},c.newItem=function(t,e,a){var o,i,n,d=f(c.footable.table).find("tbody"),r=c.footable.options.classes.detail;if(d.find("tr.emptyInfo").remove(),f.isArray(t)){for(;o=t.pop();)c.newItem(o,e,!0);c.footable.redraw(),c.footable.raise(c.footable.options.grid.events.created,{item:t,index:e})}else f.isPlainObject(t)&&(i=c._items.length,e===s||e<0||i<e?(n=c._makeRow(t,i++),c._items.push(t),d.append(n)):(n=c._makeRow(t,e),0===e?(c._items.unshift(t),d.prepend(n)):(i=d.find("tr[data-index="+(e-1)+"]"),c._items.splice(e,0,t),(i=!0===i.data("detail_created")?i.next():i).after(n)),p(d,n,r,1)),a||(c.footable.redraw(),c.footable.raise(c.footable.options.grid.events.created,{item:t,index:e})))},c.setItem=function(t,e){var a,o;f.isPlainObject(t)&&(a=f(c.footable.table).find("tbody"),o=c._makeRow(t,e),f.extend(c._items[e],t),a.find("tr").eq(e).html(o.html()),c.footable.redraw(),c.footable.raise(c.footable.options.grid.events.updated,{item:t,index:e}))},c.removeItem=function(t){var e,a,o=f(c.footable.table).find("tbody"),i=c.footable.options.classes.detail,n=[];if(f.isArray(t))for(;a=t.pop();)n.push(c.removeItem(a));else t===s?o.find("tr").each(function(){n.push(c._items.shift()),c.footable.removeRow(this)}):(e=o.find("tr[data-index="+t+"]"),n=c._items.splice(t,1)[0],c.footable.removeRow(e),p(o,e,i,-1));return c.footable.raise(c.footable.options.grid.events.removed,{item:n,index:t}),n}},{grid:{enabled:!0,data:null,template:null,cols:null,items:null,url:null,ajax:null,activeClass:"active",multiSelect:!1,showIndex:!1,showCheckbox:!1,showEmptyInfo:!1,emptyInfo:'<p class="text-center text-warning">No Data</p>',pagination:{"page-size":20,"pagination-class":"pagination pagination-centered"},indexFormatter:function(t,e,a){return a+1},checkboxFormatter:function(t){return'<input type="checkbox" class="'+(t?"checkAll":"check")+'">'},events:{loaded:"footable_grid_loaded",created:"footable_grid_created",removed:"footable_grid_removed",updated:"footable_grid_updated"}}})}(jQuery,window);